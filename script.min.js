"use strict";function e(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var t,n,r,i,a,o,l,d,c,u,m,h,v,f,g,p,y,b,L,w,j,S,E,_,q,k,A,T,O,P,I,x,N,C,z,J,D,$,F,M,W;function Y(){h=n.offsetWidth,i.forEach(function(e){e.style.width=h+"px"})}function B(e,t){e<0||e>=i.length||(1<arguments.length&&void 0!==t&&!t||(clearTimeout(u),r.style.transition="transform ".concat(c,"ms"),u=setTimeout(function(){r.style.transition=""},c)),a.disabled=0===e,e===i.length-1?o.disabled=!0:o.disabled=!1,r.style.transform="translateX(-".concat(h*e,"px)"),m[v].classList.remove("main-slider__pagination_active"),m[e].classList.add("main-slider__pagination_active"),localStorage.setItem("activeSlide",e),v=e)}function G(e,t){var n=1<arguments.length&&void 0!==t&&t,s=e.querySelectorAll(".message-error"),r=e.querySelectorAll(".message-noError"),i=e.querySelectorAll(".no-error"),a=e.querySelectorAll(".error"),t=e.querySelector(".btn-valid"),e=e.querySelector(".btn-error");t&&(t.classList.remove("btn-valid"),n&&(t.disabled=!0)),e&&(e.classList.remove("btn-error"),n&&(t.disabled=!0)),s.length&&s.forEach(function(e){e.remove()}),r.length&&r.forEach(function(e){e.remove()}),i.length&&i.forEach(function(e){e.classList.remove("no-error")}),a.length&&a.forEach(function(e){e.classList.remove("error")})}function U(e,t,n,s){var r,i=(r=t,(t=document.createElement("div")).classList.add("message-error"),t.innerText=r,t),a=e;a.classList.contains("input-invalide")||a.classList.contains("error")||(a.classList.add("input-invalide"),a.classList.add("error"),a.insertAdjacentElement("afterend",i)),a.addEventListener("input",function(){var e;"repeatPassword"!==a.name||(e=s.querySelector('input[name="password"]~.message-error'))&&(e.remove(),n.classList.remove("input-invalide"),n.classList.remove("error")),"repeatNewPassword"!==a.name||(e=s.querySelector('input[name="newPassword"]~.message-error'))&&(e.remove(),n.classList.remove("input-invalide"),n.classList.remove("error")),i.remove(),a.classList.remove("input-invalide"),a.classList.remove("error")},{once:!0})}function V(e,t){var n,s=(n=t,(t=document.createElement("div")).classList.add("message-noError"),t.innerText=n,t);e.classList.contains("input-valide")||e.classList.contains("no-error")||(e.classList.add("input-valide"),e.classList.add("no-error"),e.insertAdjacentElement("afterend",s)),e.addEventListener("input",function(){s.remove(),e.classList.remove("input-valide"),e.classList.remove("no-error")},{once:!0})}function X(e,t,n,s,r,i,a,o,l,d,c){var u={},m={};return null!=e&&(0===e.trim().length?u.email="This field is required":R(e)?m.email="All right":u.email='Please enter a valid email address (your entry is not in the format "somebody@example.com")'),null!=l&&(0===l.trim().length?u.subject="This field is required":R(l)?m.subject="All right":u.subject='Please enter a valid email address (your entry is not in the format "somebody@example.com")'),null!=t&&(0===t.trim().length?u.password="This field is required":t.trim().length<6?u.password="The password must be longer than 6 characters!":null!=o?0===o.trim().length?u.repeatPassword="This field is required":o!==t?(u.password="Passwords must match!",u.repeatPassword="Passwords must match!"):(m.repeatPassword="All right",m.password="All right"):m.password="All right"),null!=d&&(0===d.trim().length?u.newPassword="This field is required":d.trim().length<6?u.newPassword="The password must be longer than 6 characters!":null!=c&&(0===c.trim().length?u.repeatNewPassword="This field is required":c!==d?(u.newPassword="Passwords must match!",u.repeatNewPassword="Passwords must match!"):(m.repeatNewPassword="All right",m.newPassword="All right"))),null!=n&&(0===n.trim().length?u.phone="This field is required":n.match(/^(\s*)?(\+)?([-_():=+]?\d[- _():=+]?){10,14}(\s*)?$/)?m.phone="All right":u.phone='Please enter a valid phone (your entry is not in the format "+79999999999")'),null!=s&&(0===s.trim().length?u.name="This field is required":m.name="All right"),null!=r&&(0===r.trim().length?u.sname="This field is required":m.sname="All right"),null!=i&&(0===i.trim().length?u.age="This field is required":+i<18?u.age="The age must be over 18 years old":m.age="All right"),null!=a&&(0===a.trim().length?u.location="This field is required":m.location="All right"),[u,m]}function H(e){e.classList.remove("btn-error"),e.classList.add("btn-valid")}function K(e){e.classList.remove("btn-valid"),e.classList.add("btn-error")}function Q(e,t){e.disabled=!0,t.addEventListener("change",function(){t.checked?e.disabled=!1:e.disabled=!0})}function R(e){return e.match(/^[0-9a-z-\.]+\@[0-9a-z-]{2,}\.[a-z]{2,}$/i)}function Z(e,t){var n,s;document.querySelector(t)&&(n=document.querySelector(t),s=document.querySelector(".modal-overlay_js"),t=document.querySelector(e),e=n.querySelector(".modal-btn-close_js"),(n||e||t)&&(t.addEventListener("click",function(){n.classList.remove("hidden"),s.classList.remove("hidden")}),e.addEventListener("click",function(){n.classList.add("hidden"),s.classList.add("hidden")}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(n.classList.add("hidden"),s.classList.add("hidden"))})))}function ee(e,t){t=!(1<arguments.length&&void 0!==t)||t,e=e.querySelector(".spinner_js");e&&(t?e.classList.remove("hidden"):e.classList.add("hidden"))}function te(e,t){var n=1<arguments.length&&void 0!==t?t:null;n&&n.classList.add("hidden");var s,r=document.querySelector(".wrapper-error_js"),i=document.querySelector(".modal-overlay_js");r&&i&&(t=r.querySelector(".close-error-btn_js"),n=(s=document.querySelector(".wrapper-success_js")).querySelector(".close-success-btn_js"),e&&(s.classList.remove("hidden"),i.classList.remove("hidden"),n.addEventListener("click",function(){s.classList.add("hidden"),i.classList.add("hidden")},{once:!0}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(s.classList.add("hidden"),i.classList.add("hidden"))}),setTimeout(function(){s.classList.add("hidden"),i.classList.add("hidden")},2e3)),e||(r.classList.remove("hidden"),i.classList.remove("hidden"),t.addEventListener("click",function(){r.classList.add("hidden"),i.classList.add("hidden")},{once:!0}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(r.classList.add("hidden"),i.classList.add("hidden"))}),setTimeout(function(){r.classList.add("hidden"),i.classList.add("hidden")},2e3)))}function ne(e){var t=e.url,n=e.method,s=e.headers,e=e.body;return fetch("https://academy.directlinedev.com"+t+"?v=1.0.0",{method:void 0===n?"GET":n,headers:s,body:void 0===e?null:e})}function se(){var e=document.querySelectorAll(".nav-no-login_js"),t=document.querySelectorAll(".nav-login_js"),n=localStorage.getItem("token");e&&t&&(n?(t.forEach(function(e){e.classList.remove("hidden")}),e.forEach(function(e){e.classList.add("hidden")})):(t.forEach(function(e){e.classList.add("hidden")}),e.forEach(function(e){e.classList.remove("hidden")})))}se(),(t=document.querySelector(".to-up-btn_js"))&&(t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",function(){1500<window.pageYOffset&&t.classList.remove("hidden"),window.pageYOffset<1500&&t.classList.add("hidden")})),(f=document.querySelector(".main-slider_js"))&&(n=f.querySelector(".slider-wrapper_js"),r=n.querySelector(".slider-inner-wrapper_js"),i=e(r.querySelectorAll(".slider-slide_js")),a=f.querySelector(".slider-btn-prev_js"),o=f.querySelector(".slider-btn-next_js"),l=f.querySelector(".slider-pagination_js"),d=i.length,c=500,f=0,f=localStorage.getItem("activeSlide")?+localStorage.getItem("activeSlide"):0,u=null,m=[],v=h=0,function(){for(var e=0;e<d;e++){var t=document.createElement("li"),n=function(e){var t=document.createElement("button");e===v&&t.classList.add("main-slider__pagination_active");return t.addEventListener("click",function(){B(e)}),t}(e);m.push(n),t.appendChild(n),l.insertAdjacentElement("beforeend",t)}}(),Y(),B(f),window.addEventListener("resize",function(){Y(),B(v)}),a.addEventListener("click",function(){B(v-1)}),o.addEventListener("click",function(){B(v+1)})),document.querySelector(".swiper-container")&&new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,loop:!0,navigation:{nextEl:".swiper-btn-next_js",prevEl:".swiper-btn-prev_js"}}),Z(".sign-in-btn_js",".sing-in-modal_js"),Z(".message-btn_js",".message-modal_js"),Z(".register-btn_js",".sing-up-modal_js"),(y=document.querySelector(".mobile-menu-btn_js"))&&(f=document.querySelector(".mobile-menu-close_js"),g=document.querySelector(".mobile-menu-wrapper_js"),p=document.querySelector(".mobile-menu_js"),Z(".sign-in-moble-btn_js",".sing-in-modal_js"),Z(".register-moble-btn_js",".sing-up-modal_js"),y.addEventListener("click",function(){g.classList.remove("mobile-menu-hidden"),p.classList.remove("mobile-menu-hidden")}),f.addEventListener("click",function(){g.classList.add("mobile-menu-hidden"),p.classList.add("mobile-menu-hidden")}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(g.classList.add("mobile-menu-hidden"),p.classList.add("mobile-menu-hidden"))}),document.addEventListener("DOMContentLoaded",function(){window.onresize=function(){486<window.outerWidth&&(g.classList.add("mobile-menu-hidden"),p.classList.add("mobile-menu-hidden"))}})),j=document.forms.signInform,S=document.querySelector(".sing-in-modal_js"),j&&(b=j.elements.email,L=j.elements.password,w=j.querySelector(".sing-in-btn_js"),j.addEventListener("submit",function(t){t.preventDefault();var e,n=X(b.value,L.value);Object.keys(n[0]).length?(K(w),Object.keys(n[0]).forEach(function(e){var t=n[0][e];U(j.elements[e],t)})):H(w),Object.keys(n[1]).length&&Object.keys(n[1]).forEach(function(e){var t=n[1][e];V(j.elements[e],t)}),Object.keys(n[0]).length||(e={email:b.value,password:L.value},ee(S),ne({method:"POST",url:"/api/users/login",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(ee(S,!1),!e.success)throw e;localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),t.target.reset(),G(S),te(!0,S),se(),location.pathname="/pages/profile"}).catch(function(e){ee(S,!1),t.target.reset(),G(S),te(!1,S),alert(e._message)}))})),I=document.forms.registerForm,x=document.querySelector(".sing-up-modal_js"),I&&(E=I.elements.email,_=I.elements.password,q=I.elements.repeatPassword,k=I.elements.name,A=I.elements.sname,T=I.elements.location,O=I.elements.age,$=I.elements.agreement,Q(P=I.querySelector(".sing-up-btn_js"),$),I.addEventListener("submit",function(t){t.preventDefault();var e,n=X(E.value,_.value,void 0,k.value,A.value,O.value,T.value,q.value);Object.keys(n[0]).length?(K(P),Object.keys(n[0]).forEach(function(e){var t=n[0][e];U(I.elements[e],t,_,I)})):H(P),Object.keys(n[1]).length&&Object.keys(n[1]).forEach(function(e){var t=n[1][e];V(I.elements[e],t)}),Object.keys(n[0]).length||(e={email:E.value,password:_.value,age:+O.value,name:k.value,surname:A.value,location:T.value},ee(x),ne({method:"POST",url:"/api/users",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(ee(x,!1),!e.success)throw e;t.target.reset(),G(x,!0),te(!0,x)}).catch(function(e){ee(x,!1),t.target.reset(),G(x,!0),te(!1,x),alert(JSON.stringify(e.errors))}))})),M=document.forms.messageForm,W=document.querySelector(".message-modal_js"),M&&(N=M.elements.email,C=M.elements.subject,z=M.elements.name,J=M.elements.phone,D=M.elements.message,$=M.elements.agreement,Q(F=M.querySelector(".message-btn_js"),$),M.addEventListener("submit",function(t){t.preventDefault();var e,n=X(N.value,void 0,J.value,z.value,void 0,void 0,void 0,void 0,C.value);Object.keys(n[0]).length?(K(F),Object.keys(n[0]).forEach(function(e){var t=n[0][e];U(M.elements[e],t)})):H(F),Object.keys(n[1]).length&&Object.keys(n[1]).forEach(function(e){var t=n[1][e];V(M.elements[e],t)}),Object.keys(n[0]).length||(e=JSON.stringify({email:N.value,phone:J.value,name:z.value,message:D.value}),e={to:C.value,body:e},ee(W),ne({method:"POST",url:"/api/emails",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(ee(W,!1),!e.success)throw e;t.target.reset(),G(W,!0),te(!0,W)}).catch(function(e){ee(W,!1),t.target.reset(),G(W,!0),te(!1,W),alert(e._message)}))}));